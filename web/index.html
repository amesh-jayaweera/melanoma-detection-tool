<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Melanoma Detection Tool</title>
    <link rel="icon" href="images/logo-mel.svg">
    <link href="css/styles.css" type="text/css" rel="stylesheet" />
    <link href="css/aos/aos.css" type="text/css" rel="stylesheet" />
    <link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
</head>

<body>
    <div class="container">
        <div class="header">

            <!-- navbar -->
            <nav class="navbar navbar-expand-lg navbar-light ">
                <a class="navbar-brand" href="#">
                    <!-- <span class="icon-melanoma-icon"><span class="path1"></span><span class="path2"></span><span
                            class="path3"></span></span> -->
                            <img src="images/logo-mel.svg" width="200px" alt="">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-list"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbar-list">
                    <ul class="navbar-nav ml-auto ">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#about-melanoma">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#melanoma-detection-tool">Detection Tool</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#melanoma-diagnosis">Melanoma Diagnosis</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#contact-us">Contact</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>

        <!-- image slider -->
        <section class="banner-image">
            <div id="carouselIndicators" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselIndicators" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="d-block w-100" src="images/slider-image-1.png" alt="First slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="images/slider-image-2.png" alt="Second slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="images/slider-image-3.png" alt="Third slide">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </section>

        <!-- about-melanoma -->
        <div class="about-melanoma" id="about-melanoma">
            <div class="about-melanoma-heading" data-aos="fade-up">
                About the <span>Melanoma</span>
            </div>
            <hr />
            <div class="about-melanoma-body" data-aos="fade-up">
                <p class="first-para"><b>Melanoma is a serious form of skin cancer that begins in cells known as
                        melanocytes.</b>
                    Melanoma skin cancer is more dangerous because of its ability to spread to other organs more rapidly
                    if it is not
                    treated at an early stage. Based on the global cancer data statistics, melanoma is among the twenty
                    most common cancer types in the world and when different types of skin cancers are considered,
                    melanoma can be identified as the deadliest form of skin cancer.
                    <br /><br />
                    Melanocytes are skin cells found in the upper layer of skin. They produce a pigment known as
                    <b>melanin</b>, which gives skin its color.
                    When skin is exposed to ultraviolet (UV) radiation from the sun or tanning beds, it causes skin
                    damage that triggers the melanocytes to
                    produce more melanin, but only the eumelanin pigment attempts to protect the skin by causing the
                    skin to darken or tan.

                    <br /><br />
                    <b>Melanoma occurs when DNA damages from burning or tanning due to UV radiation which triggers
                        changes (mutations) in the melanocytes, resulting in uncontrolled cellular growth </b>.
                    <br /><br />
                    These mutations that occur in human DNA from UV radiation are called somatic mutations. On the other
                    hand, germline
                    mutations, or mutations that happen when cells are divided when producing offspring passes
                    hereditary diseases from parents to the child. It has been found that Melanoma can occur due to
                    both somatic and germline mutations in DNA.
                </p>
                <img class="d-block image-melanoma " data-aos="fade-up" src="images/abput-melanoma.jpeg"
                    alt="melanoma-image-1">
                <br />
                <p data-aos="fade-up">
                    Melanoma is present in many different shapes, sizes and colors. That is why it is tricky to
                    provide a comprehensive set of warning signs. But it is <b>vital to detect Melanoma at its early
                        stages </b> and
                    start medical treatment so that it will not spread at a high rate and affect the other organs as
                    well which makes it difficult to be treated at its last stages. Melanoma is usually curable when
                    detected and treated early. Once melanoma has spread deeper into the skin or other parts of the
                    body, it becomes more difficult to treat and can be deadly.

                    <br />
                </p>

                <p class="text-center" data-aos="zoom-in"><b><i><q>At the beginning of the year 2021 it was
                                estimated that 207,390 cases of Melanoma will be diagnosed just in the U.S. and from
                                those patients
                                it was estimated that 7,180 people will die of Melanoma. </q></i></b>
                </p>
                <p data-aos="fade-up">
                    At present techniques like total cutaneous photography, dermoscopy, confocal scanning laser
                    microscopy (CSLM), ultrasound, magnetic
                    resonance imaging (MRI), optical coherence tomography (OCT), and multispectral imaging are being
                    used in
                    screening Melanoma of which dermoscopies are more widely being used.
                    <br />
                    <br />When looking at the
                    statistics, it can be observed that <b>fair-skinned people have a higher risk of being affected by
                        melanoma
                        when compared to darker-skinned people</b>. The reason for this is that darker-skinned people
                    have more
                    eumelanin and fair-skinned people have more pheomelanin. As eumelanin can protect the skin from
                    being damaged by UV radiation from sources such as sun, tanning beds, etc. by darkening the
                    skin, fair-skinned people are more likely to be affected by melanoma due to lack of eumelanin.
                    Therefore, melanoma can be found commonly in European, American and Australian regions.
                </p>
            </div>
        </div>

        <!-- melanoma-detection-tool -->
        <div class="melanoma-detection-tool" id="melanoma-detection-tool">
            <div class="melanoma-detection-tool-heading" id="melanoma-detection-tool-heading" data-aos="fade-up">
                <span>Melonoma</span> Detection Tool
            </div>
            <img class="d-block image-melanoma" src="images/Melanoma-Detection-App-2.png" alt="melanoma-image-1"
                data-aos="fade-up">
            <div class="melanoma-detection-tool-body">

                <p class="first-para" data-aos="fade-up">There were multiple reasons that made us create this online tool which could be
                    used as an
                    alternative to <b>detect Melanoma in its earliest stages at a lesser cost and with a better accuracy
                        so
                        that the risk of the disease affecting the other organs is minimized </b>. Studies have shown
                    that a
                    dermoscopy may even lower the diagnostic accuracy when being performed by inexperienced
                    dermatologists and therefore it needs to be performed by a dermatologist with a load of experience
                    on skin lesions and an adequate amount of clinical practice. Even when an expert dermatologist uses
                    a dermoscopy for diagnosis the accuracy level of it is estimated to be between 75-84%.
                </p>
                <p data-aos="fade-up">
                    Even when the <b> most common way of screening Melanoma is by using a dermoscopy </b>, still in this
                    tool we
                    have included the option to use their DNA sequence as well to perform the diagnosis as there were
                    incidents where even though the person is affected with Melanoma, still it might take a while to be
                    noticeable on the surface of the skin.
                    <br /><br />
                    As the first change occurs in the DNA, using the DNA sequence there are instances where Melanoma can
                    be detected at its very initial stages which makes the
                    medical procedures lesser and cure the patient sooner. Even a patient with a risk of being affected
                    by Melanoma due to a germline mutation, can use this tool to diagnose Melanoma from time to time so
                    that it could be detected as early as possible by detecting the mutations in the DNA sequence.
                </p>
            </div>

            <div class="tool-functionality">
                <div class="tool-functionality-title" data-aos="flip-down">
                    How the Tool Works
                </div>

                <div class="tool-functionality-body">
                    <div class="card" data-aos="fade-right">
                        <div class="row">
                            <div class="col-1 step-indicator">
                                1
                            </div>
                            <div class="col-11">
                                <p>To start with, first you need to enter the general details requested from you to the
                                    portal and then select via which option you would prefer to perform a diagnosis on
                                    Melanoma using this online tool. </p>
                            </div>
                        </div>
                    </div>
                    <div class="card" data-aos="fade-left">
                        <div class="row">
                            <div class="col-1 step-indicator">
                                2
                            </div>
                            <div class="col-11">
                                <p>There are two options available in this tool namely by providing an image of the skin
                                    lesion or by providing the DNA sequence, from which you could select the most
                                    appropriate option based on the requirement. </p>
                            </div>
                        </div>
                    </div>
                    <div class="card" data-aos="fade-right">
                        <div class="row">
                            <div class="col-1 step-indicator">
                                3
                            </div>
                            <div class="col-11">
                                <p>If an image of the skin lesion is provided to the tool in order to perform the
                                    diagnosis,
                                    the tool will first execute the required pre-processing steps to obtain the image
                                    with
                                    better detail and less noise while segmenting the skin lesion from the background.
                                    Then
                                    the tool will look for the dermoscopic features that could be extracted from the
                                    image
                                    and based on those extracted dermoscopic features a trained classification model
                                    will
                                    output the diagnosis result with the level of confidence at which the diagnosis
                                    result
                                    was obtained.</p>
                            </div>
                        </div>
                    </div>
                    <div class="card" data-aos="fade-left">
                        <div class="row">
                            <div class="col-1 step-indicator">
                                4
                            </div>
                            <div class="col-11">
                                <p>If the other option is selected to perform the diagnosis based on the DNA sequence,
                                    the
                                    tool will first pre-process the DNA sequence and obtain the required genes from the
                                    sequence which causes Melanoma if mutated. Then the tool will find for any mutations
                                    in
                                    those genes and if no mutations were found, the tool will provide the output as
                                    Melanoma
                                    not detected.</p>
                            </div>
                        </div>
                    </div>
                    <div class="card" data-aos="fade-right">
                        <div class="row">
                            <div class="col-1 step-indicator">
                                5
                            </div>
                            <div class="col-11">
                                <p>But if any mutations are detected in this process, then the tool will convert the
                                    mutated
                                    DNA sequence to its primary protein structure and create a vector representation of
                                    the
                                    primary protein structure. Then using a trained model the diagnosis of Melanoma will
                                    be
                                    performed using the vector representation of the primary protein structure and the
                                    diagnosis result will be given as the output with the confidence level at which the
                                    diagnosis result was obtained.</p>
                            </div>
                        </div>
                    </div>

                    <div class="tool-functionality-image">
                        <img src="images/diagram-toolfunctionality.png" alt="" data-aos="fade-up">
                    </div>
                </div>
            </div>
        </div>

        <!-- test-melanoma-diagnosis -->
        <div class="melanoma-diagnosis" id="melanoma-diagnosis">
            <div class="card melanoma-diagnosis-section text-left">
                <div class="melanoma-diagnosis-heading aos-init aos-animate" data-aos="fade-up">Melanoma Diagnosis</div>
                <hr>
                <div class="melanoma-diagnosis-body">
                    <form action="" data-aos="fade-up" class="aos-init aos-animate">

                        <!-- Select Type -->
                        <div class="row text-center">
                            <div class="col-sm-12 col-md-6 text-center">
                                <input type="radio" id="typeDNA" name="selection" checked="checked" onchange="onSwitchForm()" value="typeDNA">
                                <label for="typeDNA" class="ml-2">Mutated DNA</label>
                            </div>
                            <div class="col-sm-12 col-md-6 text-center">
                                <input type="radio" id="typeDermoscopicImage" name="selection" class="my-auto" onchange="onSwitchForm()" value="typeDermoscopicImage">
                                <label for="typeDermoscopicImage" class="ml-2">Dermoscopic Image</label>
                            </div>
                        </div>
                        <br>

                        <!-- Input Validation Error -->
                        <div class="alert alert-warning alert-dismissible fade show" role="alert"
                             id="input-validation-error" style="display: none">
                            <strong>Input Validation Error!</strong>
                            <div id="input-validation-error-message"></div>
                        </div>

                        <!-- Server Error Message -->
                        <div class="alert alert-danger alert-dismissible fade show" role="alert"
                             id="server-error" style="display: none">
                            <strong>Server Error!</strong>
                            <div id="server-error-message"></div>
                        </div>

                        <!-- form DNA -->
                        <div id="form-dna">
                            <!-- Gene Name -->
                            <div class="form-group row">
                                <label for="geneName" class="col-md-12 col-lg-3 col-form-label">Gene Name</label>
                                <div class="col-md-12 col-lg-9">
                                    <select id="geneName" name="geneName">
                                        <option value="BRAF">BRAF</option>
                                        <option value="LRP1B">LRP1B</option>
                                        <option value="MUC16">MUC16</option>
                                        <option value="NRAS">NRAS</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Tier -->
                            <div class="form-group row">
                                <label for="tier" class="col-md-12 col-lg-3 col-form-label">Tier</label>
                                <div class="col-md-12 col-lg-9">
                                    <select id="tier" name="tier">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Tumour Origin -->
                            <div class="form-group row">
                                <label for="tumorOrigin" class="col-md-12 col-lg-3 col-form-label">Tumour Origin</label>
                                <div class="col-md-12 col-lg-9">
                                    <select id="tumorOrigin" name="tumorOrigin">
                                        <option value="primary">Primary</option>
                                        <option value="NS">Not Specified</option>
                                        <option value="metastasis">Metastasis</option>
                                        <option value="secondary">Secondary</option>
                                        <option value="recurrent">Recurrent</option>
                                        <option value="hyperplasia adjacent to primary tumour">
                                            Hyperplasia adjacent to primary tumour
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <!-- Age -->
                            <div class="form-group row">
                                <label for="age" class="col-md-12 col-lg-3 col-form-label">Age</label>
                                <div class="col-md-3 col-lg-2">
                                    <input type="number" class="form-control" id="age" name="age" placeholder="Age" value="0">
                                </div>
                            </div>

                            <!-- Mutated DNA Sequence -->
                            <div class="form-group row">
                                <label for="mutatedDNA" class="col-md-12 col-lg-3 col-form-label">DNA Sequence</label>
                                <div class="col-md-12 col-lg-9">
                                    <input type="text" class="form-control" id="mutatedDNA" name="mutatedDNA" placeholder="DNA Sequence">
                                </div>
                            </div>
                        </div>

                        <!-- form Dermoscopic Image -->
                        <div id="form-skin-image" style="display: none">
                            <div class="form-group row">
                                <label for="input-03" class="col-md-12 col-lg-2 col-form-label">Dermoscopy Image</label>
                                <div class="col-md-12 col-lg-10">
                                    <input type="file" class="form-control" id="img" placeholder="Input Dermoscopy Image">
                                </div>
                            </div>
                        </div>

                        <!-- Check Result -->
                        <div class="text-center" id="checkButtonImage" style="display: none;">
                            <button class="btn btn-primary" type="button" onclick="onCheckResultImage()"
                                    id="btn-check-result">
                                <span id="btn-loading-spinner" role="status" aria-hidden="true"></span>
                                Check Result
                            </button>
                        </div>

                        <div class="text-center" id="checkButtonDNA">
                            <button class="btn btn-primary" type="button" onclick="onCheckResultDNA()"
                                    id="btn-check-result">
                                <span id="btn-loading-spinner" role="status" aria-hidden="true"></span>
                                Check Result
                            </button>
                        </div>

                        <!-- Results DNA -->
                        <div id="results-dna" style="display:none;">
                            <br/>
                            <div class="text-center">
                                <div class="alert alert-primary" role="alert">
                                    <h4 class="alert-heading">Melanoma Diagnosis Results</h4>
                                </div>
                            </div>

                            <div>
                                <table class="table-responsive table caption-bottom">
                                    <caption>Changes in Protein Primary Structure</caption>
                                    <thead>
                                        <tr>
                                            <th scope="col">A</th>
                                            <th scope="col">C</th>
                                            <th scope="col">D</th>
                                            <th scope="col">E</th>
                                            <th scope="col">F</th>
                                            <th scope="col">G</th>
                                            <th scope="col">H</th>
                                            <th scope="col">I</th>
                                            <th scope="col">K</th>
                                            <th scope="col">L</th>
                                            <th scope="col">M</th>
                                            <th scope="col">N</th>
                                            <th scope="col">P</th>
                                            <th scope="col">Q</th>
                                            <th scope="col">R</th>
                                            <th scope="col">S</th>
                                            <th scope="col">T</th>
                                            <th scope="col">V</th>
                                            <th scope="col">W</th>
                                            <th scope="col">Y</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pss_changes"></tbody>
                                </table>
                            </div>

                            <!-- risk level -->
                            <div class="text-center">
                                <div role="alert" id="risk-level-alert">
                                    <div>There is a <strong id="melanoma-probability-byDNA-value"></strong>
                                        % of risk of being affected by melanoma. </div>
                                </div>
                            </div>

                        </div>

                        <!-- Results Dermoscopic Image -->
                        <div id="resultsImage" style="display: none;">
                            <br/>
                            <div class="text-center">
                                <div class="alert alert-primary" role="alert">
                                    <h4 class="alert-heading">Melanoma Diagnosis Results</h4>
                                </div>
                            </div>

                            <div>
                                <table class="table-responsive table caption-bottom">
                                    <thead>
                                        <tr>
                                            <th scope="col">Asymmetry</th>
                                            <td scope="col"><span id="asymmetry"></span></td>
                                            <th scope="col">Blotches</th>
                                            <td scope="col"><span id="blotches"></span></td>
                                        </tr>
                                        <tr>
                                            <th scope="col">Border Irregularity</th>
                                            <td scope="col"><span id="border"></span></td>
                                            <th scope="col">Globules</th>
                                            <td scope="col"><span id="globules"></span></td>
                                        </tr>
                                        <tr>
                                            <th scope="col">Colour Variation</th>
                                            <td scope="col"><span id="colour"></span></td>
                                            <th scope="col">Atypical Pigment Network</th>
                                            <td scope="col"><span id="atypical"></span></td>
                                        </tr>
                                        <tr>
                                            <th scope="col">Diameter</th>
                                            <td scope="col"><span id="diameter"></span></td>
                                            <th scope="col">Irregular Streaks</th>
                                            <td scope="col"><span id="streaks"></span></td>
                                        </tr>
                                        <tr>
                                            <th scope="col">Blue-white Veil</th>
                                            <td scope="col"><span id="blue"></span></td>
                                            <th scope="col">Milky-red Areas</th>
                                            <td scope="col"><span id="red"></span></td>
                                        </tr>
                                        <tr>
                                            <th scope="col">Regression Structure</th>
                                            <td scope="col"><span id="regression"></span></td>
                                            <th scope="col">Rosettes</th>
                                            <td scope="col"><span id="rosettes"></span></td>
                                        </tr>
                                    </thead>
                                </table>
                            </div>

                            <!-- risk level -->
                            <div class="text-center">
                                <div role="alert" id="risk-level-alert">
                                        <div>Diagnosis result is <strong id="imageResult"></strong> and the confidence on the result given is <strong id="imagePercentage"></strong>%</div>
                                </div>
                            </div>

                        </div>
                        <br/>
                    </form>
                </div>
            </div>
        </div>

        <!-- contact us section -->
        <div class="contact-us" id="contact-us">
            <div class="contact-us-heading text-center" data-aos="fade-up">
                Get in Touch
            </div>
            <hr />
            <div class="contact-us-body">
                <div class="row">
                    <div class="d-sm-none d-md-block col-md-12 col-lg-6 col-6 text-center">
                        <img src="images/contact-us-img.png" alt="" data-aos="fade-right">
                    </div>
                    <div class="col-md-12 col-lg-6">
                        <form action="" data-aos="fade-left">
                            <p>Have an inquiry or some feedback for us?<br />Fill out the form below to contact our
                                team.</p>
                            <div class="form-group row">
                                <label>Name: </label>
                                <div class="col-12 mb-4">
                                    <input type="text" class="form-control" id="name" placeholder="Your Name">
                                </div>
                                <label>Email: </label>
                                <div class="col-12 mb-4">
                                    <input type="text" class="form-control" id="email" placeholder="Email Address">
                                </div>
                                <label>Message: </label>
                                <div class="col-12 mb-4">
                                    <input type="text" class="form-control" id="message-body"
                                        placeholder="Type your Message Here...">
                                </div>
                            </div>
                            <div class="text-center mb-3">
                                <button type="button" class="btn btn-primary ">Send</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="row">
            <div class="col-6">
                <img src="images/logo-mel.svg" width="300px" alt="">
            </div>
            <div class="col-6 text-right footer-info">
                <p>+94 77 123 12345 | +94 77 123 12345</p>
                <p>info@melonoma.com</p>
            </div>
        </div>
        <div class="text-center">
            2022 All Right Reserved
        </div>
    </div>

    <script src="js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
        crossorigin="anonymous"></script>
    <script src="js/script.js"></script>
    <script src="js/aos.js"></script>
    <script>
        AOS.init({
            duration: 1000,
        });
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script type="text/javascript">

        // global constants
        const DNA_CHARS = ['A', 'C', 'G', 'T'];
        const API_DNA = "https://melanoma-detection-tool-api.herokuapp.com/predict-melanoma/pps";
        const Image_DNA = "https://melanoma-detection-tool-api.herokuapp.com/predict-melanoma/dermoscopic-images";
        // const Image_DNA = "http://127.0.0.1:5000/predict-melanoma/dermoscopic-images";
        // const API_DNA = "http://127.0.0.1:5000/predict-melanoma/pps";


        function onCheckResultImage(){
            var fd = new FormData();
            var files = $('#img')[0].files;
        
            if(files.length > 0 ){
                fd.append('image',files[0]);
                $.ajax({
                        method: "POST",
                        crossDomain: true,
                        dataType: "json",
                        crossOrigin: true,
                        async: true,
                        contentType: false,
                        processData: false,
                        data: fd,
                        url: Image_DNA,
                        success: function (result) {
                            setButtonToDefaultMode();
                            if(result[2][0] == 0) {
                                $("#asymmetry").text("No");
                            } else {
                                $("#asymmetry").text("Yes");
                            }
                            if(result[2][1] == 0) {
                                $("#border").text("No");
                            } else {
                                $("#border").text("Yes");
                            }
                            if(result[2][2] == 0) {
                                $("#colour").text("No");
                            } else {
                                $("#colour").text("Yes");
                            }
                            if(result[2][3] == 0) {
                                $("#diameter").text("No");
                            } else {
                                $("#diameter").text("Yes");
                            }
                            if(result[2][4] == 0) {
                                $("#globules").text("No");
                            } else {
                                $("#globules").text("Yes");
                            }
                            if(result[2][5] == 0) {
                                $("#blotches").text("No");
                            } else {
                                $("#blotches").text("Yes");
                            }
                            if(result[2][6] == 0) {
                                $("#red").text("No");
                            } else {
                                $("#red").text("Yes");
                            }
                            if(result[2][7] == 0) {
                                $("#rosettes").text("No");
                            } else {
                                $("#rosettes").text("Yes");
                            }
                            if(result[2][8] == 0) {
                                $("#regression").text("No");
                            } else {
                                $("#regression").text("Yes");
                            }
                            if(result[2][9] == 0) {
                                $("#blue").text("No");
                            } else {
                                $("#blue").text("Yes");
                            }
                            if(result[2][10] == 0) {
                                $("#atypical").text("No");
                            } else {
                                $("#atypical").text("Yes");
                            }
                            if(result[2][11] == 0) {
                                $("#streaks").text("No");
                            } else {
                                $("#streaks").text("Yes");
                            }
                            document.getElementById("imageResult").innerText = result[0]
                            document.getElementById("imagePercentage").innerText = result[1].toFixed(2)
                            document.getElementById("resultsImage").removeAttribute("style");
                        },
                        error: function (error) {
                            showServerErrorMessage(error.message);
                            setButtonToDefaultMode();
                        }
                    });
            }
        }

        function onCheckResultDNA() {
            const resultsDNA = document.getElementById("results-dna");
            resultsDNA.setAttribute("style", "display: none;");
            const inputValidationErrorBlock = document.getElementById("input-validation-error");
            inputValidationErrorBlock.setAttribute("style", "display: none;");
            const type = document.querySelector('input[name="selection"]:checked').value;
            if(type === "typeDermoscopicImage") {
                // TO-DO
            } else if(type === "typeDNA") {
                const geneName = document.querySelector('#geneName').value;
                const tier = Number(document.querySelector('#tier').value);
                const tumorOrigin = document.querySelector('#tumorOrigin').value;
                const age = Number(document.querySelector('#age').value);
                const mutatedDNASeq = document.querySelector('#mutatedDNA').value.trim();

                if(!(age >= 0 && age <= 120)) {
                    showValidationErrorMessage("Age must be in between 0 - 120");
                    return;
                }

                if(!isValidDNA(mutatedDNASeq)) {
                    showValidationErrorMessage("DNA Sequence can be only contained 'A', 'C', 'G', 'T' characters!");
                    return;
                }

                setButtonToLoadingMode();
                // All inputs valid now!
                const request_data = {
                    gene : geneName,
                    tumor : tumorOrigin,
                    tier : tier,
                    age : age,
                    mutated_dna : mutatedDNASeq
                };

                $.ajax({
                    method: "POST",
                    crossDomain: true,
                    dataType: "json",
                    crossOrigin: true,
                    async: true,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    data: JSON.stringify(request_data),
                    url: API_DNA,
                    success: function (result) {
                        setButtonToDefaultMode();
                        showResultByDNA(result);
                    },
                    error: function (error) {
                        showServerErrorMessage(error.message);
                        setButtonToDefaultMode();
                    }
                });
            }
        }

        function showResultByDNA(result) {
            const prob = Math.round(Number(result['probability']) * 100);
            const resultsDNA = document.getElementById("results-dna");
            const resultAlert = document.getElementById("risk-level-alert");
            resultsDNA.removeAttribute("style");
            if(prob >= 50) {
                resultAlert.setAttribute("class", "alert alert-danger")
            } else {
                resultAlert.setAttribute("class", "alert alert-success")
            }
            const probElement = document.getElementById("melanoma-probability-byDNA-value");
            probElement.innerText = prob.toString();
            $('#pss_changes > tr > td').remove();
            const pps = document.getElementById("pss_changes");
            let pps_tr = "<tr>";
            const pps_values = result['pps'];
            for(let i=0; i<pps_values.length; i++) {
                pps_tr += "<td>" + pps_values[i].toString() + "</td>";
            }
            pps_tr += "</tr>";
            $('#pss_changes').append(pps_tr);
        }

         /***
         * The method set 'Check Result' button to be disabled and loading mode
         */
        function setButtonToLoadingMode() {
            const btnLoadingSpinner = document.getElementById("btn-loading-spinner");
            const btnCheckResult = document.getElementById("btn-check-result");
            btnLoadingSpinner.setAttribute("class", "spinner-border spinner-border-sm");
            btnCheckResult.setAttribute("disabled", "true");
        }

        /***
         * The method set 'Check Result' button to default mode
         */
        function setButtonToDefaultMode() {
            const btnLoadingSpinner = document.getElementById("btn-loading-spinner");
            const btnCheckResult = document.getElementById("btn-check-result");
            btnLoadingSpinner.removeAttribute("class");
            btnCheckResult.removeAttribute("disabled");
        }

        /***
         * The method shows input validation error messages
         * @param errorMessage - instance of String that indicates the error message
         */
        function showValidationErrorMessage(errorMessage) {
            const inputValidationErrorBlock = document.getElementById("input-validation-error");
            inputValidationErrorBlock.setAttribute("style", "display: block;");
            document.getElementById("input-validation-error-message").innerText = errorMessage;
        }

        /***
         * The method shows input validation error messages
         * @param errorMessage - instance of String that indicates the error message
         */
        function showServerErrorMessage(errorMessage) {
            const inputValidationErrorBlock = document.getElementById("server-error");
            inputValidationErrorBlock.setAttribute("style", "display: block;");
            document.getElementById("server-error-message").innerText = errorMessage;
        }

        /***
         * This function switch the melanoma diagnosis method based on user option
         */
        function onSwitchForm() {
            const typeDermoscopicImageForm = document.getElementById("form-skin-image");
            const typeDNAForm = document.getElementById("form-dna");
            const type = document.querySelector('input[name="selection"]:checked').value;
            document.getElementById("resultsImage").setAttribute("style", "display: none;");
            document.getElementById("results-dna").setAttribute("style", "display: none;");
            if(type === "typeDermoscopicImage") {
                typeDermoscopicImageForm.removeAttribute("style");
                typeDNAForm.setAttribute("style", "display: none;");
                document.getElementById("checkButtonImage").removeAttribute("style");
                document.getElementById("checkButtonDNA").setAttribute("style", "display: none;");
                
            } else if(type === "typeDNA") {
                typeDNAForm.removeAttribute("style");
                typeDermoscopicImageForm.setAttribute("style", "display: none;");
                document.getElementById("checkButtonDNA").removeAttribute("style");
                document.getElementById("checkButtonImage").setAttribute("style", "display: none;");
            }
        }

        /***
         * The method validates the DNA sequence
         * @param seq -  instance of String
         * @returns {boolean} returns True/False.
         *                    True - Sequence is valid.
         *                    False - Sequence is invalid.
         */
        function isValidDNA(seq) {
            if(seq.length === 0) return false;

            for (let i = 0; i < seq.length; i++) {
                if(!DNA_CHARS.includes(seq.charAt(i))) {
                    return false;
                }
            }
            return true;
        }
    </script>
</body>
</html>